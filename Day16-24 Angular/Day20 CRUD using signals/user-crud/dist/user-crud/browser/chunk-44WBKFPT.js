import{a as u,b as c,e as o,g as a,l as n,p as l,za as b}from"./chunk-A6BHDAQB.js";var d=class i{http=l(b);apiUrl="https://jsonplaceholder.typicode.com/users";usersSubject=new o([]);users$=this.usersSubject.asObservable();loadingSubject=new o(!1);loading$=this.loadingSubject.asObservable();constructor(){this.loadUsers()}loadUsers(){this.loadingSubject.next(!0),setTimeout(()=>{let e=JSON.parse(localStorage.getItem("users_legacy")||"[]");this.usersSubject.next(e),this.loadingSubject.next(!1)},500)}addUser(e){let s=c(u({},e),{id:Math.floor(Math.random()*1e5)}),t=[...this.usersSubject.value,s];return localStorage.setItem("users_legacy",JSON.stringify(t)),this.usersSubject.next(t),a(s)}updateUser(e){let r=this.usersSubject.value.map(t=>t.id===e.id?e:t);return localStorage.setItem("users_legacy",JSON.stringify(r)),this.usersSubject.next(r),a(e)}deleteUser(e){let r=this.usersSubject.value.filter(t=>t.id!==e);return localStorage.setItem("users_legacy",JSON.stringify(r)),this.usersSubject.next(r),a(void 0)}getUserById(e){return this.usersSubject.value.find(s=>s.id===e)}static \u0275fac=function(s){return new(s||i)};static \u0275prov=n({token:i,factory:i.\u0275fac,providedIn:"root"})};export{d as a};
