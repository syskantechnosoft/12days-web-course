import{a as h,b as d,c as M,d as U,g as I,h as L,i as O,j as N,k as P,l as A,p as T,r as q}from"./chunk-CPNBL7NA.js";import{a as k}from"./chunk-44WBKFPT.js";import{$ as y,Ca as F,D as m,Ea as S,Fa as E,J as v,O as u,W as s,X as n,Y as e,Z as f,aa as _,da as i,fa as b,p as c,ua as x,wa as C}from"./chunk-A6BHDAQB.js";function R(t,o){t&1&&(n(0,"div",16),i(1,"Name is required "),e())}function V(t,o){t&1&&(n(0,"span"),i(1,"Username is required"),e())}function D(t,o){t&1&&(n(0,"span"),i(1,"Must be > 6 chars"),e())}function w(t,o){t&1&&(n(0,"span"),i(1,"Alphanumeric only"),e())}function G(t,o){if(t&1&&(n(0,"div",16),u(1,V,2,0,"span",17)(2,D,2,0,"span",17)(3,w,2,0,"span",17),e()),t&2){let a,r,l,p=_();m(),s("ngIf",(a=p.userForm.get("username"))==null?null:a.hasError("required")),m(),s("ngIf",(r=p.userForm.get("username"))==null?null:r.hasError("minlength")),m(),s("ngIf",(l=p.userForm.get("username"))==null?null:l.hasError("pattern"))}}function Z(t,o){t&1&&(n(0,"span"),i(1,"Email is required"),e())}function B(t,o){t&1&&(n(0,"span"),i(1,"Invalid format (@ and . only)"),e())}function $(t,o){if(t&1&&(n(0,"div",16),u(1,Z,2,0,"span",17)(2,B,2,0,"span",17),e()),t&2){let a,r,l=_();m(),s("ngIf",(a=l.userForm.get("email"))==null?null:a.hasError("required")),m(),s("ngIf",(r=l.userForm.get("email"))==null?null:r.hasError("pattern"))}}var z=class t{fb=c(T);route=c(F);router=c(S);userService=c(k);userForm=this.fb.group({id:[0],name:["",d.required],username:["",[d.required,d.minLength(7),d.pattern("^[a-zA-Z0-9]+$")]],email:["",[d.required,d.pattern("^[a-zA-Z0-9]+@[a-zA-Z0-9]+.[a-zA-Z0-9]+$")]],role:["user"]});isEditMode=!1;ngOnInit(){let o=this.route.snapshot.paramMap.get("id");if(o){this.isEditMode=!0;let a=this.userService.getUserById(+o);a&&this.userForm.patchValue(a)}}onSubmit(){if(this.userForm.valid){let o=this.userForm.value;this.isEditMode?this.userService.updateUser(o).subscribe(()=>{this.router.navigate(["/legacy-crud"])}):this.userService.addUser(o).subscribe(()=>{this.router.navigate(["/legacy-crud"])})}}static \u0275fac=function(a){return new(a||t)};static \u0275cmp=v({type:t,selectors:[["app-user-form-legacy"]],decls:32,vars:6,consts:[[1,"form-container"],[3,"ngSubmit","formGroup"],["for","name"],["type","text","id","name","formControlName","name"],["class","error",4,"ngIf"],["for","username"],["type","text","id","username","formControlName","username"],["for","email"],["type","email","id","email","formControlName","email"],["for","role"],["id","role","formControlName","role"],["value","user"],["value","admin"],[1,"actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],["routerLink","/legacy-crud",1,"btn","btn-secondary"],[1,"error"],[4,"ngIf"]],template:function(a,r){if(a&1&&(n(0,"div",0)(1,"h2"),i(2),e(),n(3,"form",1),y("ngSubmit",function(){return r.onSubmit()}),n(4,"div")(5,"label",2),i(6,"Name"),e(),f(7,"input",3),u(8,R,2,0,"div",4),e(),n(9,"div")(10,"label",5),i(11,"Username"),e(),f(12,"input",6),u(13,G,4,3,"div",4),e(),n(14,"div")(15,"label",7),i(16,"Email"),e(),f(17,"input",8),u(18,$,3,2,"div",4),e(),n(19,"div")(20,"label",9),i(21,"Role"),e(),n(22,"select",10)(23,"option",11),i(24,"User"),e(),n(25,"option",12),i(26,"Admin"),e()()(),n(27,"div",13)(28,"button",14),i(29,"Save"),e(),n(30,"a",15),i(31,"Cancel"),e()()()()),a&2){let l,p,g;m(2),b("",r.isEditMode?"Edit":"Add"," User (Legacy - Reactive Forms)"),m(),s("formGroup",r.userForm),m(5),s("ngIf",((l=r.userForm.get("name"))==null?null:l.invalid)&&((l=r.userForm.get("name"))==null?null:l.touched)),m(5),s("ngIf",((p=r.userForm.get("username"))==null?null:p.touched)&&((p=r.userForm.get("username"))==null?null:p.invalid)),m(5),s("ngIf",((g=r.userForm.get("email"))==null?null:g.touched)&&((g=r.userForm.get("email"))==null?null:g.invalid)),m(10),s("disabled",r.userForm.invalid)}},dependencies:[q,I,P,A,h,N,M,U,O,L,E,C,x],styles:[".form-container[_ngcontent-%COMP%]{max-width:500px;margin:20px auto;padding:20px;border:1px solid #ccc;border-radius:8px}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:8px;box-sizing:border-box}.actions[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:20px}.btn[_ngcontent-%COMP%]{padding:10px 20px;text-decoration:none;border:none;border-radius:4px;cursor:pointer;text-align:center}.btn-primary[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}button[_ngcontent-%COMP%]:disabled{background-color:#ccc}.error[_ngcontent-%COMP%]{color:red;font-size:.8rem;margin-top:5px}"]})};export{z as UserFormLegacyComponent};
